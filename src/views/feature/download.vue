<script setup>
import axios from 'axios'

defineOptions({
  name: 'Download'
})

const base64 =
  'data:image/jpeg;base64,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'

function downloadByData(data, filename) {
  var url = URL.createObjectURL(data)
  var link = document.createElement('a')
  link.href = url
  link.download = filename
  document.body.appendChild(link)
  link.click()
  setTimeout(() => {
    URL.revokeObjectURL(url)
    document.body.removeChild(link)
  }, 200)
}

function downloadByUrl(url, filename) {
  axios
    .get(url, {
      responseType: 'blob'
    })
    .then(({ data }) => {
      downloadByData(data, filename)
    })
}

function downloadByBase64(data, filename) {
  var blob = base64ToBlob(data)
  downloadByData(blob, filename)
}

function base64ToBlob(dataURL) {
  var parts = dataURL.split(';base64,')
  var contentType = parts[0].split(':')[1]
  var raw = window.atob(parts[1])
  var rawLength = raw.length
  var rawArray = new Uint8Array(rawLength)
  for (var i = 0; i < rawLength; ++i) {
    rawArray[i] = raw.charCodeAt(i)
  }
  return new Blob([rawArray], { type: contentType })
}
</script>

<template>
  <el-card shadow="never">
    <template #header>
      <p class="font-medium">文件下载功能</p>
    </template>
    <div class="flex flex-wrap">
      <el-button
        @click="
          downloadByUrl(
            'https://cdn.pixabay.com/photo/2016/10/03/07/00/black-and-white-1711001_1280.jpg',
            'panda.jpg'
          )
        "
      >
        下载在线文件
      </el-button>

      <el-button @click="downloadByBase64(base64, 'chart.jpg')"> 下载base64图片 </el-button>
    </div>
  </el-card>
</template>
