import{r as p,ao as y,S as f,c as U,e as h,Y as o,w as t,g as a,a1 as F,n as I,l as V,ak as b,a0 as S,$ as B}from"./index-BFIPRRcq.js";import{a as C,E as z}from"./el-form-item-BwKG73FW.js";import{E as N}from"./el-progress-CdxvY8k2.js";import{_ as A}from"./index-CrAszETK.js";import{E as $}from"./el-avatar-DxLpw-5-.js";import{a as q}from"./avatar-JoT7DtXW.js";import"./castArray-DQj9x11r.js";import"./_Uint8Array-DPecK3lH.js";import"./_initCloneObject-DwmNTl8v.js";import"./isEqual-C1LNSAfW.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const D={class:I(["min-w-[180px]","max-w-[70%]"])},L=V("h3",{class:"my-8"},"个人信息",-1),M=V("span",{class:"ml-2"},"更新头像",-1),Z={__name:"profile",setup(T){const d=p(q),g=p(),c=p(),m=y(),l=f({avatar:m.user.avatar,nickname:m.user.nickname,email:m.user.email,mobile:m.user.mobile,description:""}),w=f({nickname:[{required:!0,message:"昵称必填",trigger:"blur"}]}),k=i=>{const e=new FileReader;e.onload=s=>{d.value=s.target.result},e.readAsDataURL(i.raw)},v=async i=>{await i.validate((e,s)=>{e?(console.log(l),b.success("更新信息成功")):b.error("error submit!",s)})};return(i,e)=>{const s=$,E=A,_=S,x=N,n=C,u=B,R=z;return U(),h("div",D,[L,o(R,{ref_key:"userInfoFormRef",ref:c,"label-position":"top",rules:a(w),model:a(l)},{default:t(()=>[o(n,{label:"更新头像"},{default:t(()=>[o(s,{size:80,src:a(d)},null,8,["src"]),o(x,{ref_key:"uploadRef",ref:g,accept:"image/*",action:"#",limit:1,"auto-upload":!0,"show-file-list":!0,"on-change":k,"on-preview":!0},{default:t(()=>[o(_,{plain:"",class:"ml-4"},{default:t(()=>[o(E,{"icon-class":"upload"}),M]),_:1})]),_:1},512)]),_:1}),o(n,{label:"昵称",prop:"nickname"},{default:t(()=>[o(u,{modelValue:a(l).nickname,"onUpdate:modelValue":e[0]||(e[0]=r=>a(l).nickname=r),placeholder:"请输入昵称"},null,8,["modelValue"])]),_:1}),o(n,{label:"邮箱",prop:"email"},{default:t(()=>[o(u,{modelValue:a(l).email,"onUpdate:modelValue":e[1]||(e[1]=r=>a(l).email=r),placeholder:"请输入邮箱",clearable:""},null,8,["modelValue"])]),_:1}),o(n,{label:"联系电话"},{default:t(()=>[o(u,{modelValue:a(l).mobile,"onUpdate:modelValue":e[2]||(e[2]=r=>a(l).mobile=r),placeholder:"请输入联系电话",clearable:""},null,8,["modelValue"])]),_:1}),o(n,{label:"简介"},{default:t(()=>[o(u,{modelValue:a(l).description,"onUpdate:modelValue":e[3]||(e[3]=r=>a(l).description=r),placeholder:"请输入简介",type:"textarea",autosize:{minRows:6,maxRows:8},maxlength:"56","show-word-limit":""},null,8,["modelValue"])]),_:1}),o(_,{type:"primary",onClick:e[4]||(e[4]=r=>v(a(c)))},{default:t(()=>[F(" 更新信息 ")]),_:1})]),_:1},8,["rules","model"])])}}};export{Z as default};
