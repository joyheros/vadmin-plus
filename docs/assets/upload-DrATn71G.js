import{bA as F,c as _,m as w,w as d,g as r,e as b,Y as u,aB as g,ak as x,E as j,r as f,z as M,l as P,L as A}from"./index-BFIPRRcq.js";import{a as $,E as z}from"./el-form-item-BwKG73FW.js";import{E}from"./el-progress-CdxvY8k2.js";import{_ as I}from"./index-CrAszETK.js";import{u as k,d as L}from"./index-Birqjfp0.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{E as S}from"./el-dialog-CH0ZejWe.js";import"./castArray-DQj9x11r.js";import"./_Uint8Array-DPecK3lH.js";import"./_initCloneObject-DwmNTl8v.js";import"./isEqual-C1LNSAfW.js";import"./use-dialog-l7A8RiK6.js";import"./isUndefined-DCTLXrZ8.js";import"./refs-JjLydQ47.js";const q=["src"],R={__name:"SingleUpload",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(v,{emit:p}){const t=F(v,"modelValue",p);async function s(n){const{data:c}=await k(n.file);t.value=c.url}function o(n){return n.size>2*1048*1048?(x.warning("上传图片不能大于2M"),!1):!0}return(n,c)=>{const V=I,y=j,l=E;return _(),w(l,{modelValue:r(t),"onUpdate:modelValue":c[0]||(c[0]=e=>g(t)?t.value=e:null),class:"single-uploader","show-file-list":!1,"list-type":"picture-card","before-upload":o,"http-request":s},{default:d(()=>[r(t)?(_(),b("img",{key:0,"w-full":"",src:r(t)},null,8,q)):(_(),w(y,{key:1,class:"single-uploader__icon"},{default:d(()=>[u(V,{"icon-class":"plus"})]),_:1}))]),_:1},8,["modelValue"])}}},C=N(R,[["__scopeId","data-v-d3aa92a7"]]),D=["src"],Y={__name:"MultiUpload",props:{modelValue:{type:Array,default:()=>[]},limit:{type:Number,default:10}},emits:["update:modelValue"],setup(v,{emit:p}){const m=p,h=v,t=f(""),s=f(!1),o=f([]);M(()=>h.modelValue,l=>{const e=o.value.map(a=>a.url);e.length>0&&e.length===l.length&&e.every(a=>l.some(i=>i===a))&&l.every(a=>e.some(i=>i===a))||(o.value=l.map(a=>({url:a})))},{immediate:!0});async function n(l){const{data:e}=await k(l.file),a=o.value.findIndex(i=>i.uid==l.file.uid);o.value.splice(a,1,{name:e.name,url:e.url}),m("update:modelValue",o.value.map(i=>i.url))}function c(l){const e=l.url;e&&L(e).then(()=>{m("update:modelValue",o.value.map(a=>a.url))})}function V(l){return l.size>2*1048*1048?(x.warning("上传图片不能大于2M"),!1):!0}const y=l=>{t.value=l.url,s.value=!0};return(l,e)=>{const a=I,i=E,B=S;return _(),b(A,null,[u(i,{"file-list":r(o),"onUpdate:fileList":e[0]||(e[0]=U=>g(o)?o.value=U:null),"list-type":"picture-card","before-upload":V,"http-request":n,"on-remove":c,"on-preview":y,limit:h.limit},{default:d(()=>[u(a,{"icon-class":"plus"})]),_:1},8,["file-list","limit"]),u(B,{modelValue:r(s),"onUpdate:modelValue":e[1]||(e[1]=U=>g(s)?s.value=U:null)},{default:d(()=>[P("img",{"w-full":"",src:r(t),alt:"Preview Image"},null,8,D)]),_:1},8,["modelValue"])],64)}}},G={class:"app-container"},ne={__name:"upload",setup(v){const p=f("https://cdn.pixabay.com/photo/2016/10/03/07/00/black-and-white-1711001_1280.jpg"),m=f(["https://cdn.pixabay.com/photo/2017/05/06/14/13/pathway-2289978_1280.jpg","https://cdn.pixabay.com/photo/2015/03/09/18/34/beach-666122_1280.jpg","https://cdn.pixabay.com/photo/2015/12/01/20/28/road-1072821_1280.jpg","https://cdn.pixabay.com/photo/2024/02/24/10/31/norway-8593725_1280.jpg"]);return(h,t)=>{const s=$,o=z;return _(),b("div",G,[u(o,null,{default:d(()=>[u(s,{label:"单图上传"},{default:d(()=>[u(C,{modelValue:r(p),"onUpdate:modelValue":t[0]||(t[0]=n=>g(p)?p.value=n:null)},null,8,["modelValue"])]),_:1}),u(s,{label:"多图上传"},{default:d(()=>[u(Y,{modelValue:r(m),"onUpdate:modelValue":t[1]||(t[1]=n=>g(m)?m.value=n:null)},null,8,["modelValue"])]),_:1})]),_:1})])}}};export{ne as default};
