import{al as B,r as m,S as q,o as z,c as d,e as D,l as M,Y as e,w as o,g as a,a1 as u,W as j,m as g,aB as Q,Z as $,ak as T,av as A,$ as W,a0 as Y}from"./index-BFIPRRcq.js";import{E as Z,a as G,v as H}from"./el-select-DHDsuN4V.js";/* empty css                */import{_ as J}from"./index-CChkbfOT.js";import{E as K,a as X}from"./el-table-column-BddfOH4i.js";import"./el-checkbox-q3roQbsD.js";import"./el-tooltip-CUhuhmaS.js";import"./el-tag-P6nLVvE-.js";import{E as x,a as ee}from"./el-form-item-BwKG73FW.js";import{_ as te}from"./index-CrAszETK.js";import{E as ae}from"./el-date-picker-DAAYwn7R.js";import{E as oe}from"./index-Dm81mCYQ.js";import{E as le}from"./index-YcaNCpNb.js";import"./strings-gRtzzXFx.js";import"./isEqual-C1LNSAfW.js";import"./_Uint8Array-DPecK3lH.js";import"./index-Da2eqh9n.js";import"./castArray-DQj9x11r.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./_initCloneObject-DwmNTl8v.js";import"./isUndefined-DCTLXrZ8.js";function ne(c){return B({url:"/api/v1/monitor/operation/page",method:"get",params:c})}function re(c){return B({url:"/api/v1/monitor/operation/"+c,method:"delete"})}const ie={class:"app-container"},se={class:"search-container"},Se=Object.assign({name:"Operation",inheritAttrs:!1},{__name:"index",setup(c){const y=m(x),s=m(!1),b=m([]),p=m(0),n=q({pageNum:1,pageSize:10}),E=m();function _(){s.value=!0,ne(n).then(({data:i})=>{E.value=i,p.value=i.length}).finally(()=>{s.value=!1})}function w(){y.value.resetFields(),n.pageNum=1,_()}function C(i){b.value=i.map(t=>t.id)}function N(i){const t=[b.value].join(",");if(!t){T.warning("请勾选删除项");return}A.confirm("确认删除已选中的数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{s.value=!0,re(t).then(()=>{T.success("删除成功"),w()}).finally(()=>s.value=!1)})}return z(()=>{_()}),(i,t)=>{const S=W,f=ee,k=Z,U=G,F=ae,h=te,v=Y,I=x,r=K,V=oe,O=X,L=J,P=le,R=H;return d(),D("div",ie,[M("div",se,[e(I,{ref_key:"queryFormRef",ref:y,model:a(n),inline:!0},{default:o(()=>[e(f,{label:"所属模块",prop:"module"},{default:o(()=>[e(S,{modelValue:a(n).module,"onUpdate:modelValue":t[0]||(t[0]=l=>a(n).module=l),placeholder:"请输入所属模块",clearable:""},null,8,["modelValue"])]),_:1}),e(f,{label:"操作状态",prop:"status"},{default:o(()=>[e(U,{modelValue:a(n).status,"onUpdate:modelValue":t[1]||(t[1]=l=>a(n).status=l),placeholder:"请选择",clearable:""},{default:o(()=>[e(k,{label:"成功",value:"1"}),e(k,{label:"失败",value:"0"})]),_:1},8,["modelValue"])]),_:1}),e(f,{label:"操作时间",prop:"operatingTime"},{default:o(()=>[e(F,{modelValue:a(n).operatingTime,"onUpdate:modelValue":t[2]||(t[2]=l=>a(n).operatingTime=l),type:"datetimerange","range-separator":"至","start-placeholder":"开始日期时间","end-placeholder":"结束日期时间"},null,8,["modelValue"])]),_:1}),e(f,null,{default:o(()=>[e(v,{type:"primary",onClick:_},{default:o(()=>[e(h,{"icon-class":"search"}),u("搜索")]),_:1}),e(v,{onClick:w},{default:o(()=>[e(h,{"icon-class":"reset"}),u("重置")]),_:1})]),_:1})]),_:1},8,["model"])]),e(P,{shadow:"never",class:"table-container"},{header:o(()=>[e(v,{type:"danger",disabled:a(b).length===0,onClick:t[3]||(t[3]=l=>N())},{default:o(()=>[e(h,{"icon-class":"trash"}),u("删除")]),_:1},8,["disabled"])]),default:o(()=>[j((d(),g(O,{ref:"dataTableRef",data:a(E),"highlight-current-row":"",border:"",onSelectionChange:C},{default:o(()=>[e(r,{type:"selection",fixed:"left",width:"55",align:"center"}),e(r,{label:"序号",prop:"id","min-width":"30"}),e(r,{label:"操作人员",prop:"username",width:"100"}),e(r,{label:"所属模块",prop:"module",width:"120"}),e(r,{label:"操作概要",prop:"summary",width:"200"}),e(r,{label:"操作IP",prop:"netip",width:"130"}),e(r,{label:"操作地点",prop:"address",width:"180"}),e(r,{label:"所用系统",prop:"system",width:"100"}),e(r,{label:"浏览器类型",prop:"browser",width:"100"}),e(r,{label:"操作状态",align:"center",width:"100"},{default:o(l=>[l.row.status===1?(d(),g(V,{key:0,type:"success"},{default:o(()=>[u("成功")]),_:1})):(d(),g(V,{key:1,type:"error"},{default:o(()=>[u("失败")]),_:1}))]),_:1}),e(r,{label:"操作时间",prop:"operateTime","min-width":"100"})]),_:1},8,["data"])),[[R,a(s)]]),a(p)>0?(d(),g(L,{key:0,total:a(p),"onUpdate:total":t[4]||(t[4]=l=>Q(p)?p.value=l:null),page:a(n).pageNum,"onUpdate:page":t[5]||(t[5]=l=>a(n).pageNum=l),limit:a(n).pageSize,"onUpdate:limit":t[6]||(t[6]=l=>a(n).pageSize=l),onPagination:_},null,8,["total","page","limit"])):$("",!0)]),_:1})])}}});export{Se as default};
