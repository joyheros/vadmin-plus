import{al as T,r as m,S as z,o as D,c as b,e as L,l as M,Y as e,w as n,g as o,a1 as f,W as P,m as E,aB as R,Z as $,ak as k,av as j,$ as A,a0 as Q}from"./index-BFIPRRcq.js";import{v as O}from"./el-select-DHDsuN4V.js";/* empty css                */import{_ as W}from"./index-CChkbfOT.js";import{E as Y,a as Z}from"./el-table-column-BddfOH4i.js";import"./el-checkbox-q3roQbsD.js";import"./el-tooltip-CUhuhmaS.js";import"./el-tag-P6nLVvE-.js";import{E as C,a as G}from"./el-form-item-BwKG73FW.js";import{_ as H}from"./index-CrAszETK.js";import{E as J}from"./el-date-picker-DAAYwn7R.js";import{E as K}from"./index-YcaNCpNb.js";import"./index-Dm81mCYQ.js";import"./strings-gRtzzXFx.js";import"./isEqual-C1LNSAfW.js";import"./_Uint8Array-DPecK3lH.js";import"./index-Da2eqh9n.js";import"./castArray-DQj9x11r.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./_initCloneObject-DwmNTl8v.js";import"./isUndefined-DCTLXrZ8.js";function X(d){return T({url:"/api/v1/monitor/syslog/page",method:"get",params:d})}function ee(d){return T({url:"/api/v1/monitor/syslog/"+d,method:"delete"})}const te={class:"app-container"},oe={class:"search-container"},Te=Object.assign({name:"Syslog",inheritAttrs:!1},{__name:"index",setup(d){const v=m(C),s=m(!1),g=m([]),p=m(0),r=z({pageNum:1,pageSize:10}),y=m();function u(){s.value=!0,X(r).then(({data:i})=>{y.value=i,p.value=i.length}).finally(()=>{s.value=!1})}function w(){v.value.resetFields(),r.pageNum=1,u()}function V(i){g.value=i.map(t=>t.id)}function x(i){const t=[g.value].join(",");if(!t){k.warning("请勾选删除项");return}j.confirm("确认删除已选中的数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{s.value=!0,ee(t).then(()=>{k.success("删除成功"),w()}).finally(()=>s.value=!1)})}return D(()=>{u()}),(i,t)=>{const B=A,h=G,S=J,c=H,_=Q,N=C,a=Y,q=Z,F=W,I=K,U=O;return b(),L("div",te,[M("div",oe,[e(N,{ref_key:"queryFormRef",ref:v,model:o(r),inline:!0},{default:n(()=>[e(h,{label:"所属模块",prop:"module"},{default:n(()=>[e(B,{modelValue:o(r).module,"onUpdate:modelValue":t[0]||(t[0]=l=>o(r).module=l),placeholder:"请输入所属模块",clearable:""},null,8,["modelValue"])]),_:1}),e(h,{label:"操作时间",prop:"requestTime"},{default:n(()=>[e(S,{modelValue:o(r).requestTime,"onUpdate:modelValue":t[1]||(t[1]=l=>o(r).requestTime=l),type:"datetimerange","range-separator":"至","start-placeholder":"开始日期时间","end-placeholder":"结束日期时间"},null,8,["modelValue"])]),_:1}),e(h,null,{default:n(()=>[e(_,{type:"primary",onClick:u},{default:n(()=>[e(c,{"icon-class":"search"}),f("搜索")]),_:1}),e(_,{onClick:w},{default:n(()=>[e(c,{"icon-class":"reset"}),f("重置")]),_:1})]),_:1})]),_:1},8,["model"])]),e(I,{shadow:"never",class:"table-container"},{header:n(()=>[e(_,{type:"danger",disabled:o(g).length===0,onClick:t[2]||(t[2]=l=>x())},{default:n(()=>[e(c,{"icon-class":"trash"}),f("删除")]),_:1},8,["disabled"])]),default:n(()=>[P((b(),E(q,{ref:"dataTableRef",data:o(y),"highlight-current-row":"",border:"",onSelectionChange:V},{default:n(()=>[e(a,{type:"selection",fixed:"left",width:"60",align:"center"}),e(a,{label:"序号",prop:"id","min-width":"30"}),e(a,{label:"所属模块",prop:"module",width:"100"}),e(a,{label:"请求接口",prop:"httpAddr",width:"150"}),e(a,{label:"请求方法",prop:"httpMethod",width:"100"}),e(a,{label:"IP地址",prop:"netip",width:"130"}),e(a,{label:"地点",prop:"address",width:"180"}),e(a,{label:"操作系统",prop:"system",width:"100"}),e(a,{label:"浏览器类型",prop:"browser",width:"100"}),e(a,{label:"请求耗时",prop:"execTime",width:"100"}),e(a,{label:"请求时间",prop:"requestTime","min-width":"100"}),e(a,{label:"操作",width:"60"},{default:n(l=>[e(_,{type:"primary",size:"small",link:"",onClick:ae=>i.openDetail(l.row)},{default:n(()=>[e(c,{"icon-class":"note"}),f("详情 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[U,o(s)]]),o(p)>0?(b(),E(F,{key:0,total:o(p),"onUpdate:total":t[3]||(t[3]=l=>R(p)?p.value=l:null),page:o(r).pageNum,"onUpdate:page":t[4]||(t[4]=l=>o(r).pageNum=l),limit:o(r).pageSize,"onUpdate:limit":t[5]||(t[5]=l=>o(r).pageSize=l),onPagination:u},null,8,["total","page","limit"])):$("",!0)]),_:1})])}}});export{Te as default};
